
<script type="text/discourse-plugin" version="0.8">
  const h = require("virtual-dom").h; 
  function getRandomBanner() {
    var str = settings.rotate_banner;
    var banners = str.split('|');
    if (banners.length >0) {
      var num = Math.floor( Math.random() * banners.length);
      var img = banners[num];
      return img;
    }
    return settings.banner_image;
  }

  api.createWidget("e4-banner", {
    tagName: "div",

    html() {
      if (api.getCurrentUser() == null){
         return  h("img.banner-center", {src: "https://efour.b-cdn.net/uploads/default/original/3X/f/1/f1e7c88753721ee720becc1e93187fc6c0af7fbb.jpeg", fetchpriority: "high", alt: "forum banner", style: "aspect-ratio: 925 / 359 ; width: 100%"})
        
      }

      return  h("img.banner-center", {src: getRandomBanner(), fetchpriority: "high", alt: "forum banner", style: "height: 600px ; width: 100%"})
    }
  });
</script>

<script type="text/x-handlebars" data-template-name="/connectors/above-main-container/banner">
  {{mount-widget widget="e4-banner"}}
</script>

